{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/HomeClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/HomeClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/HomeClient.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsR,GACnT,oDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/HomeClient.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/HomeClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/HomeClient.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAkQ,GAC/R,gCACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/lib/api-config.ts"],"sourcesContent":["/**\n * Centralized API Configuration\n * \n * This module provides runtime URL resolution for API calls across the application.\n * It eliminates hardcoded localhost URLs and uses environment variables for flexibility.\n * \n * Architecture:\n * - Development: Next.js (3000) + Express (3001)\n * - Production VPS: NGINX proxy (80/443) ‚Üí Next.js (3000) + Express (3001)\n * - Production Replit: Single Next.js server (5000) with API routes\n */\n\n/**\n * Environment variable validation\n * Ensures required configuration is present at runtime\n */\nfunction validateEnv() {\n  const required = {\n    // Server-side only (Node.js env vars)\n    EXPRESS_URL: process.env.EXPRESS_URL,\n    \n    // Client-side (NEXT_PUBLIC_* accessible in browser)\n    NEXT_PUBLIC_SITE_URL: process.env.NEXT_PUBLIC_SITE_URL,\n  };\n\n  const missing: string[] = [];\n\n  if (typeof window === 'undefined') {\n    // Server-side: require EXPRESS_URL\n    if (!required.EXPRESS_URL) {\n      missing.push('EXPRESS_URL');\n    }\n  }\n\n  if (missing.length > 0) {\n    console.warn(\n      `‚ö†Ô∏è  Missing environment variables: ${missing.join(', ')}\\n` +\n      `   Using fallback URLs for development.\\n` +\n      `   Set these variables for production deployment.`\n    );\n  }\n}\n\n// Run validation on module load\nvalidateEnv();\n\n/**\n * Get the API base URL for client-side requests\n * \n * @returns API base URL accessible from the browser\n * \n * Usage in client components:\n * ```typescript\n * const apiUrl = getApiBaseUrl();\n * fetch(`${apiUrl}/api/stats`);\n * ```\n */\nexport function getApiBaseUrl(): string {\n  // Client-side: use relative URLs (NGINX/Next.js rewrites handle routing)\n  if (typeof window !== 'undefined') {\n    return '';\n  }\n\n  // Server-side: direct to Express API\n  // In production VPS: http://localhost:3001 (internal communication)\n  // In production Replit: https://yourdomain.com (external URL)\n  return process.env.EXPRESS_URL || 'http://localhost:3001';\n}\n\n/**\n * Get the internal API URL for server-side requests\n * \n * @returns Internal API URL for server-to-server communication\n * \n * Usage in server components:\n * ```typescript\n * const apiUrl = getInternalApiUrl();\n * const response = await fetch(`${apiUrl}/api/stats`);\n * ```\n */\nexport function getInternalApiUrl(): string {\n  // Server-side only\n  if (typeof window !== 'undefined') {\n    throw new Error('getInternalApiUrl() can only be called server-side');\n  }\n\n  // Direct to Express API (internal communication)\n  return process.env.EXPRESS_URL || 'http://localhost:3001';\n}\n\n/**\n * Get the public site URL\n * \n * @returns Public-facing site URL (for SEO, OG tags, etc.)\n * \n * Usage:\n * ```typescript\n * const siteUrl = getSiteUrl();\n * const canonical = `${siteUrl}/thread/${slug}`;\n * ```\n */\nexport function getSiteUrl(): string {\n  return (\n    process.env.NEXT_PUBLIC_SITE_URL ||\n    process.env.VERCEL_URL ||\n    'http://localhost:3000'\n  );\n}\n\n/**\n * Build a full API URL with path\n * \n * @param path - API endpoint path (e.g., '/api/stats')\n * @returns Full API URL\n * \n * Usage:\n * ```typescript\n * const url = buildApiUrl('/api/stats');\n * const response = await fetch(url);\n * ```\n */\nexport function buildApiUrl(path: string): string {\n  const base = getApiBaseUrl();\n  const cleanPath = path.startsWith('/') ? path : `/${path}`;\n  return base ? `${base}${cleanPath}` : cleanPath;\n}\n\n/**\n * Configuration object for easy access\n */\nexport const apiConfig = {\n  /**\n   * API base URL (client or server appropriate)\n   */\n  baseUrl: getApiBaseUrl(),\n\n  /**\n   * Public site URL\n   */\n  siteUrl: getSiteUrl(),\n\n  /**\n   * Whether we're in production mode\n   */\n  isProduction: process.env.NODE_ENV === 'production',\n\n  /**\n   * Whether we're in development mode\n   */\n  isDevelopment: process.env.NODE_ENV === 'development',\n\n  /**\n   * Express API URL (server-side only)\n   */\n  get expressUrl(): string {\n    if (typeof window !== 'undefined') {\n      throw new Error('expressUrl is only available server-side');\n    }\n    return getInternalApiUrl();\n  },\n} as const;\n\n/**\n * Type-safe environment variable access\n */\nexport const env = {\n  // Server-side only\n  EXPRESS_URL: process.env.EXPRESS_URL,\n  DATABASE_URL: process.env.DATABASE_URL,\n  SESSION_SECRET: process.env.SESSION_SECRET,\n\n  // Public (client-accessible)\n  NEXT_PUBLIC_SITE_URL: process.env.NEXT_PUBLIC_SITE_URL,\n  NEXT_PUBLIC_EXPRESS_URL: process.env.NEXT_PUBLIC_EXPRESS_URL,\n\n  // Node environment\n  NODE_ENV: process.env.NODE_ENV,\n} as const;\n\n// Export helper for debugging\nexport function debugConfig() {\n  if (typeof window === 'undefined') {\n    console.log('üîß API Configuration (Server-side):');\n    console.log('  - Express URL:', env.EXPRESS_URL || 'NOT SET (using fallback)');\n    console.log('  - Site URL:', getSiteUrl());\n    console.log('  - API Base:', getApiBaseUrl());\n  } else {\n    console.log('üîß API Configuration (Client-side):');\n    console.log('  - Site URL:', env.NEXT_PUBLIC_SITE_URL || 'NOT SET');\n    console.log('  - API Base:', getApiBaseUrl());\n  }\n}\n"],"names":[],"mappings":"AAAA;;;;;;;;;;CAUC,GAED;;;CAGC;;;;;;;;;;;;;;;;AACD,SAAS;IACP,MAAM,WAAW;QACf,sCAAsC;QACtC,WAAW;QAEX,oDAAoD;QACpD,sBAAsB,QAAQ,GAAG,CAAC,oBAAoB;IACxD;IAEA,MAAM,UAAoB,EAAE;IAE5B,wCAAmC;QACjC,mCAAmC;QACnC,IAAI,CAAC,SAAS,WAAW,EAAE;YACzB,QAAQ,IAAI,CAAC;QACf;IACF;IAEA,IAAI,QAAQ,MAAM,GAAG,GAAG;QACtB,QAAQ,IAAI,CACV,CAAC,mCAAmC,EAAE,QAAQ,IAAI,CAAC,MAAM,EAAE,CAAC,GAC5D,CAAC,yCAAyC,CAAC,GAC3C,CAAC,iDAAiD,CAAC;IAEvD;AACF;AAEA,gCAAgC;AAChC;AAaO,SAAS;IACd,yEAAyE;IACzE;;IAIA,qCAAqC;IACrC,oEAAoE;IACpE,8DAA8D;IAC9D,OAAO,6DAA2B;AACpC;AAaO,SAAS;IACd,mBAAmB;IACnB;;IAIA,iDAAiD;IACjD,OAAO,6DAA2B;AACpC;AAaO,SAAS;IACd,OACE,QAAQ,GAAG,CAAC,oBAAoB,IAChC,QAAQ,GAAG,CAAC,UAAU,IACtB;AAEJ;AAcO,SAAS,YAAY,IAAY;IACtC,MAAM,OAAO;IACb,MAAM,YAAY,KAAK,UAAU,CAAC,OAAO,OAAO,CAAC,CAAC,EAAE,MAAM;IAC1D,OAAO,OAAO,GAAG,OAAO,WAAW,GAAG;AACxC;AAKO,MAAM,YAAY;IACvB;;GAEC,GACD,SAAS;IAET;;GAEC,GACD,SAAS;IAET;;GAEC,GACD,cAAc,oDAAyB;IAEvC;;GAEC,GACD,eAAe,oDAAyB;IAExC;;GAEC,GACD,IAAI,cAAqB;QACvB;;QAGA,OAAO;IACT;AACF;AAKO,MAAM,MAAM;IACjB,mBAAmB;IACnB,WAAW;IACX,cAAc,QAAQ,GAAG,CAAC,YAAY;IACtC,gBAAgB,QAAQ,GAAG,CAAC,cAAc;IAE1C,6BAA6B;IAC7B,sBAAsB,QAAQ,GAAG,CAAC,oBAAoB;IACtD,uBAAuB;IAEvB,mBAAmB;IACnB,QAAQ;AACV;AAGO,SAAS;IACd,wCAAmC;QACjC,QAAQ,GAAG,CAAC;QACZ,QAAQ,GAAG,CAAC,oBAAoB,IAAI,WAAW,IAAI;QACnD,QAAQ,GAAG,CAAC,iBAAiB;QAC7B,QAAQ,GAAG,CAAC,iBAAiB;IAC/B;;AAKF","debugId":null}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/page.tsx"],"sourcesContent":["import type { Metadata } from 'next';\nimport HomeClient from './HomeClient';\nimport { getInternalApiUrl } from './lib/api-config';\n\n// Homepage metadata\nexport const metadata: Metadata = {\n  title: 'YoForex - Expert Advisor Forum & EA Marketplace',\n  description: 'Join 10,000+ forex traders. Download free EAs, share strategies, and earn coins. #1 MT4/MT5 EA community with verified backtests and live results.',\n  keywords: ['forex forum', 'EA marketplace', 'Expert Advisor', 'MT4', 'MT5', 'forex trading', 'algorithmic trading', 'free EAs', 'trading robots'],\n};\n\nasync function fetchData(url: string) {\n  try {\n    // Server-side: use centralized API config (no hardcoded URLs)\n    const apiUrl = getInternalApiUrl();\n    const res = await fetch(`${apiUrl}${url}`, {\n      cache: 'no-store',\n      headers: {\n        'Accept': 'application/json',\n      },\n    });\n    \n    if (!res.ok) {\n      console.error(`Failed to fetch ${url}:`, res.status, res.statusText);\n      return null;\n    }\n    \n    return await res.json();\n  } catch (error) {\n    console.error(`Error fetching ${url}:`, error);\n    return null;\n  }\n}\n\nexport default async function HomePage() {\n  // Parallel data fetching from Express API\n  const [stats, categoryTree, threads] = await Promise.all([\n    fetchData('/api/stats'),\n    fetchData('/api/categories/tree/all'),  // Fetch category tree instead of flat list\n    fetchData('/api/threads'),\n  ]);\n\n  return (\n    <HomeClient \n      initialStats={stats}\n      initialCategories={categoryTree}\n      initialThreads={threads}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;;;AACA;AACA;;;;AAGO,MAAM,WAAqB;IAChC,OAAO;IACP,aAAa;IACb,UAAU;QAAC;QAAe;QAAkB;QAAkB;QAAO;QAAO;QAAiB;QAAuB;QAAY;KAAiB;AACnJ;AAEA,eAAe,UAAU,GAAW;IAClC,IAAI;QACF,8DAA8D;QAC9D,MAAM,SAAS,IAAA,gJAAiB;QAChC,MAAM,MAAM,MAAM,MAAM,GAAG,SAAS,KAAK,EAAE;YACzC,OAAO;YACP,SAAS;gBACP,UAAU;YACZ;QACF;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,QAAQ,KAAK,CAAC,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,MAAM,EAAE,IAAI,UAAU;YACnE,OAAO;QACT;QAEA,OAAO,MAAM,IAAI,IAAI;IACvB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC,EAAE;QACxC,OAAO;IACT;AACF;AAEe,eAAe;IAC5B,0CAA0C;IAC1C,MAAM,CAAC,OAAO,cAAc,QAAQ,GAAG,MAAM,QAAQ,GAAG,CAAC;QACvD,UAAU;QACV,UAAU;QACV,UAAU;KACX;IAED,qBACE,8OAAC,6HAAU;QACT,cAAc;QACd,mBAAmB;QACnB,gBAAgB;;;;;;AAGtB","debugId":null}}]
}